<post-list>
  <ul id="post-list">
    <li style="opacity: 0" each="{ item in items }">
      <div class="card blue-grey darken-1">
        <div class="card-content white-text">
          <span class="card-title">{ item.title }</span>
          <p class="truncate">
            { item.content }
          </p>
        </div>
        <div class="card-action">
          <a class="btn-flat" href="#">
            <i class="material-icons">remove_red_eye</i> View
          </a>
          <a class="btn-flat" href="#">
            <i class="material-icons">edit</i> Edit
          </a>
        </div>
      </div>
    </li>

    <li style="opacity: 0" each="{ item in items }">
      <h2 class="header">{ item.title }</h2>
      <div class="card horizontal">
        <div class="card-image">
          <img src="https://lorempixel.com/100/190/nature/6">
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <p>
              { item.content }
            </p>
          </div>
          <div class="card-action">
            <a href="#">View</a>
            <a href="#">Edit</a>
          </div>
        </div>
      </div>
    </li>
  </ul>

  <script>
    const tag = this;
    tag.items = [];
    tag.offset = 0;
    tag.limit = 25;
    tag.loaded = false;

    tag.updateItems = function () {
      tag.loaded = false;
      tag.items = Manuscript.db.find({}, {
        offset: tag.offset,
        limit: tag.limit
      });
    };

    // Before tag.update()
    tag.on('update', function () {
      console.log('post-list update');
      tag.updateItems();
    });

    // After tag.update()
    tag.on('updated', function () {
      if(!tag.loaded) {
        Materialize.showStaggeredList('#post-list');
        tag.loaded = true;
      }
    });

      tag.on('mount', function () {
        console.log('post-list mounted!');
      })
  </script>
</post-list>