<markdown-editor>
  <div class="card">
    <p>&nbsp;</p>
    <div class="card-title center">
      <input type="text" style="width: 70%; text-align: center" ref="title" placeholder="Title" value="{ _title }">
      <!--<p>Date: <input type="text" id="datepicker"></p>-->
    </div>
    <div class="card-content">
      <textarea id="editor"></textarea>

      <a class="waves-effect waves-light btn materialize-red"><i class="material-icons right">cancel</i>Cancel</a>
      <a class="waves-effect waves-light btn green right" onclick="{ save }"><i class="material-icons right">save</i>Save</a>
    </div>
  </div>

  <script>
      var tag = this;
      tag._title = opts.dataTitle || null;
      tag._id = opts._id || null;

      tag.on('mount', function () {
          tag.simplemde = new SimpleMDE({
              element: document.getElementById('editor'),
              toolbar: [
                  'bold', 'italic', 'heading', '|',
                  'quote', 'unordered-list', 'ordered-list', '|',
                  'link', 'image', '|',
                  'preview', 'side-by-side', 'fullscreen', '|',
                  'guide', {
                name: 'save',
                action: tag.save,
                className: 'fa fa-floppy-o',
                title: 'Save'}
              ]
          });
      });

      tag.save = () => {
        var obj = Manuscript.savePost(
            {
              title: tag.getTitle(),
              content: tag.getContent()
            },
            tag._id
        );

        Manuscript.info("Post saved successfully!", obj);

        if(!tag._id) {
          tag._id = obj._id;
        }
      };

      tag.getContent = () => {
        return tag.simplemde.value();
      };

      tag.getTitle = function () {
        return tag.refs.title.value
      };

      tag.setTitle = function (val) {
        return tag.refs.title.value = val
      };
  </script>
</markdown-editor>
